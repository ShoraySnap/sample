<?xml version="1.0" encoding="utf-8"?>
<Project Sdk="Microsoft.NET.Sdk">

	<PropertyGroup>
		<ResolveAssemblyWarnOrErrorOnTargetArchitectureMismatch>None</ResolveAssemblyWarnOrErrorOnTargetArchitectureMismatch>
		<AppendTargetFrameworkToOutputPath>false</AppendTargetFrameworkToOutputPath>
		<OutputType>Library</OutputType>
		<Configurations>2019;2020;2021;2022;2023;2024</Configurations>
	</PropertyGroup>

	<PropertyGroup>
		<ProjectGuid>{8554E5C2-B113-4298-8AF3-FCB0BC6251E8}</ProjectGuid>
		<RootNamespace>SnaptrudeManagerAddin</RootNamespace>
		<AssemblyName>SnaptrudeManagerAddin</AssemblyName>
	</PropertyGroup>

	<Choose>
		<When Condition="$(Configuration.Contains('2019'))">
			<PropertyGroup>
				<RevitVersion>2019</RevitVersion>
				<TargetFramework>net47</TargetFramework>
			</PropertyGroup>
		</When>
		<When Condition="$(Configuration.Contains('2020'))">
			<PropertyGroup>
				<RevitVersion>2020</RevitVersion>
				<TargetFramework>net47</TargetFramework>
			</PropertyGroup>
		</When>
		<When Condition="$(Configuration.Contains('2021'))">
			<PropertyGroup>
				<RevitVersion>2021</RevitVersion>
				<TargetFramework>net48</TargetFramework>
			</PropertyGroup>
		</When>
		<When Condition="$(Configuration.Contains('2022'))">
			<PropertyGroup>
				<RevitVersion>2022</RevitVersion>
				<TargetFramework>net48</TargetFramework>
			</PropertyGroup>
		</When>
		<When Condition="$(Configuration.Contains('2023'))">
			<PropertyGroup>
				<RevitVersion>2023</RevitVersion>
				<TargetFramework>net48</TargetFramework>
			</PropertyGroup>
		</When>
		<Otherwise>
			<PropertyGroup>
				<RevitVersion>2024</RevitVersion>
				<TargetFramework>net48</TargetFramework>
			</PropertyGroup>
		</Otherwise>
	</Choose>

	<ItemGroup>
	  <Compile Remove="lib\**" />
	  <EmbeddedResource Remove="lib\**" />
	  <None Remove="lib\**" />
	</ItemGroup>

	<ItemGroup>
	  <None Remove="Icons\logo16.png" />
	  <None Remove="Icons\logo24.png" />
	  <None Remove="Icons\logo32.png" />
	  <None Remove="Views\FamilyUploadMVVM.xaml" />
	</ItemGroup>

	<ItemGroup>
	  <EmbeddedResource Include="Icons\logo16.png" />
	  <EmbeddedResource Include="Icons\logo24.png" />
	  <EmbeddedResource Include="Icons\logo32.png" />
	</ItemGroup>

	<ItemGroup>
		<Reference Include="PresentationCore" />
		<Reference Include="PresentationFramework" />
		<Reference Include="Revit.IFC.Export">
		  <HintPath>lib\IFC\$(RevitVersion)\Revit.IFC.Export.dll</HintPath>
		</Reference>
		<Reference Include="System" />
		<Reference Include="System.Data" />
		<Reference Include="System.Drawing" />
		<Reference Include="System.Net" />
		<Reference Include="System.Net.Http" />
		<Reference Include="System.Windows.Forms" />
		<Reference Include="System.Xaml" />
		<Reference Include="System.Xml" />
		<Reference Include="WindowsBase" />
		<Reference Include="RevitAPI" />
		<Reference Include="RevitAPIIFC" Version="$(RevitVersion)">
			<HintPath>lib\IFC\$(RevitVersion)\RevitAPIIFC.dll</HintPath>
		</Reference>
		<Reference Include="RevitAPIUI" />
		<PackageReference Include="Newtonsoft.Json" Version="13.0.3" />
		<PackageReference Include="Revit_All_Main_Versions_API_x64" Version="$(RevitVersion).*" IncludeAssets="build; compile" PrivateAssets="All" />
	</ItemGroup>

	<ItemGroup>
	  <Page Include="Views\FamilyUploadMVVM.xaml" />
	</ItemGroup>

	<Target Name="CleanRevitAddin" BeforeTargets="CoreClean">
		<Message Text="Clean Revit Addin Files" Importance="high" />
	</Target>

	<Import Project="..\TrudeImporter\TrudeImporter.projitems" Label="Shared" />

	<Import Project="..\TrudeSerializer\TrudeSerializer.projitems" Label="Shared" />

	<PropertyGroup>
		<Optimize>False</Optimize>
		<DebugSymbols>true</DebugSymbols>
		<OutputPath>bin\Debug\$(RevitVersion)\</OutputPath>
		<DefineConstants>DEBUG;TRACE;REVIT$(RevitVersion)</DefineConstants>
		<NoWarn>MSB3052</NoWarn>
		<DebugType>Full</DebugType>
	</PropertyGroup>

</Project>